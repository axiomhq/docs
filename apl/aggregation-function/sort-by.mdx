---
title: sort-by
description: 'This page explains how to use the sort-by operator in APL.'
---

The `sort-by` operator in APL orders the rows of a dataset by one or more columns. You can specify whether each column is sorted in ascending or descending order. Use `sort-by` when you want to bring the most relevant rows to the top, such as the longest-running requests, the most recent log entries, or the highest error counts. Sorting helps you quickly identify trends and anomalies in your data.

## For users of other query languages

If you come from other query languages, this section explains how to adjust your existing queries to achieve the same results in APL.

<AccordionGroup>
<Accordion title="Splunk SPL users">

In Splunk SPL, you use the `sort` command to order results. In APL, the `sort-by` operator provides the same functionality, but you specify the order (ascending or descending) directly after each column.

<CodeGroup>
```sql Splunk example
... | sort - req_duration_ms
````

```kusto APL equivalent
['sample-http-logs']
| sort-by req_duration_ms desc
```

</CodeGroup>

</Accordion>
<Accordion title="ANSI SQL users">

In ANSI SQL, you use the `ORDER BY` clause to sort query results. In APL, you achieve the same result with the `sort-by` operator. The syntax is similar, but instead of keywords like `ORDER BY`, you use the operator with column names and order modifiers.

<CodeGroup>
```sql SQL example
SELECT *
FROM sample_http_logs
ORDER BY req_duration_ms DESC
```

```kusto APL equivalent
['sample-http-logs']
| sort-by req_duration_ms desc
```

</CodeGroup>

</Accordion>
</AccordionGroup>

## Usage

### Syntax

```kusto
T | sort-by ColumnName [asc | desc] [, ColumnName [asc | desc] ...]
```

### Parameters

* `T`: The input tabular dataset.
* `ColumnName`: The name of the column to sort by.
* `asc`: Optional keyword for ascending order. This is the default.
* `desc`: Optional keyword for descending order.

### Returns

The operator returns the input dataset, with rows reordered according to the specified columns and sort directions.

## Use case examples

<Tabs>
<Tab title="Log analysis">

You want to find the slowest requests in your web server logs.

**Query**

```kusto
['sample-http-logs']
| sort-by req_duration_ms desc
| take 5
```

\[Run in Playground]\([https://play.axiom.co/axiom-play-qf1k/query?initForm=%7B%22apl%22%3A%22\['sample-http-logs](https://play.axiom.co/axiom-play-qf1k/query?initForm=%7B%22apl%22%3A%22['sample-http-logs)'] | sort-by req\_duration\_ms desc | take 5%22%7D)

**Output**

| \_time              | req\_duration\_ms | id  | status | uri          | method | geo.city | geo.country |
| ------------------- | ----------------- | --- | ------ | ------------ | ------ | -------- | ----------- |
| 2024-05-21T12:31:22 | 920               | u45 | 200    | /checkout    | POST   | Berlin   | DE          |
| 2024-05-21T12:29:04 | 910               | u38 | 200    | /cart        | GET    | Paris    | FR          |
| 2024-05-21T12:28:44 | 905               | u22 | 500    | /product/123 | GET    | London   | GB          |
| 2024-05-21T12:26:15 | 880               | u15 | 200    | /login       | POST   | Madrid   | ES          |
| 2024-05-21T12:25:32 | 870               | u09 | 404    | /unknown     | GET    | Rome     | IT          |

This query sorts log entries by request duration in descending order and returns the five slowest requests.

</Tab>
<Tab title="OpenTelemetry traces">

You want to identify the longest spans across services to investigate potential bottlenecks.

**Query**

```kusto
['otel-demo-traces']
| sort-by duration desc
| take 5
```

\[Run in Playground]\([https://play.axiom.co/axiom-play-qf1k/query?initForm=%7B%22apl%22%3A%22\['otel-demo-traces](https://play.axiom.co/axiom-play-qf1k/query?initForm=%7B%22apl%22%3A%22['otel-demo-traces)'] | sort-by duration desc | take 5%22%7D)

**Output**

| \_time              | duration | span\_id | trace\_id | service.name          | kind     | status\_code |
| ------------------- | -------- | -------- | --------- | --------------------- | -------- | ------------ |
| 2024-05-21T13:40:01 | 00:00:09 | s789     | t123      | checkoutservice       | server   | 200          |
| 2024-05-21T13:39:50 | 00:00:08 | s456     | t123      | productcatalogservice | client   | 200          |
| 2024-05-21T13:39:32 | 00:00:08 | s321     | t789      | frontend              | server   | 500          |
| 2024-05-21T13:38:20 | 00:00:07 | s654     | t456      | cartservice           | server   | 200          |
| 2024-05-21T13:37:15 | 00:00:07 | s987     | t321      | frontendproxy         | internal | 200          |

This query sorts spans by duration in descending order and lists the five longest-running spans.

</Tab>
<Tab title="Security logs">

You want to find the most recent failed requests to monitor suspicious activity.

**Query**

```kusto
['sample-http-logs']
| where status == '401' or status == '403'
| sort-by _time desc
| take 5
```

\[Run in Playground]\([https://play.axiom.co/axiom-play-qf1k/query?initForm=%7B%22apl%22%3A%22\['sample-http-logs](https://play.axiom.co/axiom-play-qf1k/query?initForm=%7B%22apl%22%3A%22['sample-http-logs)'] | where status == '401' or status == '403' | sort-by \_time desc | take 5%22%7D)

**Output**

| \_time              | req\_duration\_ms | id  | status | uri       | method | geo.city | geo.country |
| ------------------- | ----------------- | --- | ------ | --------- | ------ | -------- | ----------- |
| 2024-05-21T12:35:10 | 220               | u19 | 403    | /admin    | GET    | Berlin   | DE          |
| 2024-05-21T12:34:48 | 150               | u27 | 401    | /checkout | POST   | Paris    | FR          |
| 2024-05-21T12:33:20 | 300               | u45 | 401    | /login    | POST   | Rome     | IT          |
| 2024-05-21T12:32:44 | 180               | u33 | 403    | /settings | GET    | Madrid   | ES          |
| 2024-05-21T12:31:55 | 210               | u11 | 401    | /cart     | GET    | London   | GB          |

This query filters security-related failed requests, sorts them by timestamp in descending order, and shows the five most recent suspicious entries.

</Tab>
</Tabs>

## List of related operators

* [top](/apl/tabular-operators/top-operator): Returns the first N rows after sorting, which is more efficient if you need only a subset rather than the fully sorted dataset.
* [take](/apl/tabular-operators/take-operator): Returns the first N rows without sorting. Use this when order does not matter.
* [summarize](/apl/tabular-operators/summarize-operator): Aggregates and groups data before you sort by aggregated values.
* [order](/apl/tabular-operators/order-operator): An alias of `sort-by`. Both work identically, but `sort-by` is the preferred syntax.
* [project](/apl/tabular-operators/project-operator): Selects specific columns, often used together with `sort-by` to simplify result sets.
