---
title: redact
description: 'This page explains how to use the redact operator in APL.'
---

The `redact` operator in APL replaces sensitive or unwanted data in string fields using regular expressions. You can use it to sanitize log data, obfuscate personal information, or anonymize text for auditing or analysis. The operator allows you to define one or multiple regular expressions to identify and replace matching patterns. You can customize the replacement token, generate hashes of redacted values, or retain structural elements while obfuscating specific segments of data.

This operator is useful when you need to ensure data privacy or compliance with regulations such as GDPR or HIPAA. For example, you can redact credit card numbers, email addresses, or personally identifiable information from logs and datasets.

## For users of other query languages

If you come from other query languages, this section explains how to adjust your existing queries to achieve the same results in APL.

<AccordionGroup>
<Accordion title="Splunk SPL users">

In Splunk SPL, data sanitization is often achieved using custom regex-based transformations or eval functions. The `redact` operator in APL simplifies this process by directly applying regular expressions and offering options for replacement or hashing.

<CodeGroup>
```sql Splunk example
| eval sanitized_field=replace(field, "regex_pattern", "*")
```

```kusto APL equivalent
| redact 'regex_pattern' on field
```
</CodeGroup>

</Accordion>
<Accordion title="ANSI SQL users">

ANSI SQL typically requires a combination of functions like `REPLACE` or `REGEXP_REPLACE` for data obfuscation. APLâ€™s `redact` operator consolidates these capabilities into a single, flexible command.

<CodeGroup>
```sql SQL example
SELECT REGEXP_REPLACE(field, 'regex_pattern', '*') AS sanitized_field FROM table;
```

```kusto APL equivalent
| redact 'regex_pattern' on field
```
</CodeGroup>

</Accordion>
</AccordionGroup>

## Usage

### Syntax

```kusto
| redact [replaceToken="*"] [replaceHash=false] [redactGroups=false] [auditField=string] [name=]<regex>, ([name=]<regex>) [on Field]
```

### Parameters

| Parameter       | Type     | Description                                                                 |
|-----------------|----------|-----------------------------------------------------------------------------|
| `replaceToken`  | string   | The character with which to replace matches. The default is `*`.                     |
| `replaceHash`   | bool     | Specifies whether to replace matches with a hash of the data. Use either `replaceToken` or `replaceHash` within one query.     |
| `redactGroups`  | bool     | Specifies whether to look for capturing groups in the regex and only redact characters in the capturing groups. Use this option for partial replacements or replacements that maintain the structure of the data. The default is false. |
| `auditField`    | string   | Specifies the field where to store a map of redaction details in the format `map[field:string][]regexHits:string` for auditing.                             |
| `name`          | string   | Assigns a name to the regex for auditing purposes.                          |
| `regex`         | regex    | A single regex or an array/map of regexes to match against field values.    |
| `on Field`      |          | Limits redaction to specific fields. The default is all string fields.    |

### Returns

The `redact` operator returns the input dataset with sensitive data replaced or hashed, depending on the provided configuration.

## Use case examples

<Tabs>
<Tab title="Log analysis">

You can use the `redact` operator to sanitize HTTP logs by obfuscating geographical data.

**Query**

```kusto
['sample-http-logs']
| redact replaceToken="x" @'.*' on ['geo.city'], ['geo.country']
```

[Run in Playground](https://play.axiom.co/axiom-play-qf1k/query?initForm=%7B%22apl%22%3A%22%5B'sample-http-logs'%5D%20%7C%20redact%20replaceToken%3D'x'%20%40'.*'%20on%20%5B'geo.city'%5D%2C%20%5B'geo.country'%5D%22%7D)

**Output**

| _time               | geo.city | geo.country |
|---------------------|----------|-------------|
| 2023-01-01 12:00:00 | `xxx`      | `xxxxxxxx`         |
| 2023-01-01 12:05:00 | `xxxxxx`      | `xxxxxxxxxx`         |

The query replaces all characters matching the pattern `.*` with the character `x` in the `geo.city` and `geo.country` fields.

</Tab>
<Tab title="OpenTelemetry traces">

In OpenTelemetry traces, use `redact` to anonymize trace IDs with their hashes while preserving the service structure.

**Query**

```kusto
['otel-demo-traces']
| redact replaceHash=true @'.*' on trace_id
```

[Run in Playground](https://play.axiom.co/axiom-play-qf1k/query?initForm=%7B%22apl%22%3A%22%5B'otel-demo-traces'%5D%20%7C%20redact%20replaceHash%3Dtrue%20%40'.*'%20on%20trace_id%22%7D)

**Output**

| _time               | trace_id          | service.name       |
|---------------------|-------------------|--------------------|
| 2023-01-01 12:00:00 | `d41d8cd98f...`   | `frontend`         |
| 2023-01-01 12:05:00 | `c4ca4238a0...`   | `checkoutservice`  |

The query replaces trace IDs with hashed values while keeping the rest of the trace intact.

</Tab>
<Tab title="Security logs">

You can use the `redact` operator to remove parts of a URL from security logs.

**Query**

```kusto
['sample-http-logs']
| redact replaceToken="." redactGroups=true @'.*/(.*)' on uri
```

[Run in Playground](https://play.axiom.co/axiom-play-qf1k/query?initForm=%7B%22apl%22%3A%22%5B'sample-http-logs'%5D%20%7C%20redact%20replaceToken%3D'.'%20redactGroups%3Dtrue%20%40'.*%2F(.*)'%20on%20uri%22%7D)

**Output**

| _time               | uri |
|---------------------|----------|-------------|
| 2023-01-01 12:00:00 | `/api/v1/pub/sub/....`      |
| 2023-01-01 12:05:00 | `/api/v1/textdata/......`      |
| 2023-01-01 12:10:00 | `/api/v1/payment/....`      |

The query performs a partial redaction in the capturing groups of the regex. It replaces the characters in the slug of the URL (the part after the last `/`) with `.` characters.

</Tab>
</Tabs>

## List of related operators

- [project](/apl/tabular-operators/project-operator): Selects specific fields from the dataset, useful for focused analysis.
- [summarize](/apl/tabular-operators/summarize-operator): Aggregates data, helpful when combining redacted data with statistical analysis.
- [parse](/apl/tabular-operators/parse-operator): Extracts and parses structured data using regex patterns.