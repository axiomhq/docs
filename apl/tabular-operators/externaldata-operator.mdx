---
title: externaldata
description: 'This page explains how to use the externaldata operator in APL.'
---

The `externaldata` operator in APL allows you to retrieve data from external storage sources, such as Azure Blob Storage, AWS S3, or HTTP endpoints, and use it within queries. You can specify the schema of the external data and query it as if it were a native dataset. This operator is useful when you need to analyze data that is stored externally without importing it into Axiom.

<Note>
The `externaldata` operator currently supports external data sources with a file size of maximum 5 MB.
</Note>

## For users of other query languages

If you come from other query languages, this section explains how to adjust your existing queries to achieve the same results in APL.

<AccordionGroup>
<Accordion title="Splunk SPL users">

Splunk does not have a direct equivalent to `externaldata`, but you can use `inputlookup` or `| rest` commands to retrieve data from external sources.

<CodeGroup>
```sql Splunk example
| inputlookup external_data.csv
```

```kusto APL equivalent
externaldata (id:string, timestamp:datetime) ["https://storage.example.com/data.csv"] with (format="csv")
```
</CodeGroup>

</Accordion>
<Accordion title="ANSI SQL users">

In SQL, the equivalent approach is to use `OPENROWSET` to access external data stored in cloud storage.

<CodeGroup>
```sql SQL example
SELECT * FROM OPENROWSET(BULK 'https://storage.example.com/data.csv', FORMAT = 'CSV') AS data;
```

```kusto APL equivalent
externaldata (id:string, timestamp:datetime) ["https://storage.example.com/data.csv"] with (format="csv")
```
</CodeGroup>

</Accordion>
</AccordionGroup>

## Usage

### Syntax

```kusto
externaldata (FieldName1:FieldType1, FieldName2:FieldType2, ...) ["URI1", "URI2", ...] [with (format = "FormatType", ignoreFirstRecord=false)]
```

### Parameters

| Parameter | Description |
|-----------|-------------|
| `FieldName1:FieldType1, FieldName2:FieldType2, ...` | Defines the schema of the external data. |
| `URI1, URI2, ...` | The external storage URIs where the source data resides. |
| `format` | Optional: Specifies the file format. The supported types are `csv`, `scsv`, `tsv`, `psv`, `json`, `multijson`, `raw`, `txt`. |
| `ignoreFirstRecord` | Optional: A Boolean value that specifies whether to ignore the first record in the external data sources. The default is false. Use this property for CSV files with headers. |

### Returns

The operator returns a table with the specified schema, containing data retrieved from the external source.

## Use case example

Retrieve HTTP logs stored in an external CSV file.

**Query**

```kusto
let LookupTable = externaldata (serviceName: string, humanreadableServiceName: string) ["https://raw.githubusercontent.com/axiomhq/docs/eaf16cb80dd21220b602a62e67cfe405fbcb3ae4/doc-assets/files/example-lookup-table.csv"] with (format="csv", ignoreFirstRecord=true);
['otel-demo-traces']
| lookup kind=leftouter LookupTable on $left.['service.name'] == $right.serviceName
| project _time, span_id, ['service.name'], humanreadableServiceName
```

**Output**

| _time | method | status | uri |
|--------|--------|--------|--------|
| 2024-03-10T12:30:00Z | GET | 200 | /home |

This query retrieves log data stored in an external CSV file and makes it available for analysis.

## List of related operators

- [lookup](/apl/tabular-operators/lookup-operator): Performs joins between a dataset and an external table.
- [union](/apl/tabular-operators/union-operator): Merges multiple datasets, including external ones.