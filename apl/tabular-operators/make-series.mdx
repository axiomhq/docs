---
title: make-series
description: 'This page explains how to use the make-series operator in APL.'
---

The `make-series` operator creates time series data by aggregating values over specified time bins. You use it to turn event-based data into evenly spaced intervals, which is useful for visualizing trends, comparing metrics over time, or performing anomaly detection.

You find this operator useful when you want to:

- Analyze trends in metrics such as request duration, error rates, or throughput.
- Prepare data for charting in dashboards where regular time intervals are required.
- Aggregate trace or log data into time buckets for performance monitoring or incident analysis.

## For users of other query languages

If you come from other query languages, this section explains how to adjust your existing queries to achieve the same results in APL.

<AccordionGroup>
<Accordion title="Splunk SPL users">

In Splunk SPL, you often use the `timechart` command to create time series. In APL, you achieve the same result with the `make-series` operator, which lets you explicitly define the aggregation, time field, and binning interval.

<CodeGroup>
```sql Splunk example
index=sample-http-logs
| timechart span=1m avg(req_duration_ms)
````

```kusto APL equivalent
['sample-http-logs']
| make-series avg(req_duration_ms) default=0 on _time from ago(1h) to now() step 1m
```

</CodeGroup>

</Accordion>
<Accordion title="ANSI SQL users">

In ANSI SQL, you typically use `GROUP BY` with windowing functions or generated series to build time-based aggregations. In APL, the `make-series` operator is the dedicated tool for generating continuous time series with defined intervals, which avoids the need for joins with a calendar table.

<CodeGroup>
```sql SQL example
SELECT
  time_bucket('1 minute', _time) AS minute,
  AVG(req_duration_ms) AS avg_duration
FROM sample_http_logs
WHERE _time > NOW() - interval '1 hour'
GROUP BY minute
ORDER BY minute
```

```kusto APL equivalent
['sample-http-logs']
| make-series avg(req_duration_ms) default=0 on _time from ago(1h) to now() step 1m
```

</CodeGroup>

</Accordion>
</AccordionGroup>

## Usage

### Syntax

```kusto
make-series [Aggregation [, ...]]
    [default = DefaultValue]
    on TimeField
    [in Range]
    step StepSize
    [by GroupingField [, ...]]
```

### Parameters

| Parameter        | Description                                                                                                     |
| ---------------- | --------------------------------------------------------------------------------------------------------------- |
| `Aggregation`    | One or more aggregation functions (for example, `avg()`, `count()`, `sum()`) to apply over each time bin.       |
| `default`        | A value to use when no records exist in a time bin.                                                             |
| `TimeField`     | The field containing timestamps used for binning.                                                              |
| `Range`          | An optional range expression specifying the start and end of the series (for example, `from ago(1h) to now()`). |
| `StepSize`       | The size of each time bin (for example, `1m`, `5m`, `1h`).                                                      |
| `GroupingField` | Optional fields to split the series by, producing multiple series in parallel.                                 |

### Returns

The operator returns a table where each row represents a group (if specified), and each aggregation function produces an array of values aligned with the generated time bins.

## Use case examples

<Tabs>
<Tab title="Log analysis">

You want to analyze how average request duration evolves over time, binned into 5-minute intervals.

**Query**

```kusto
['sample-http-logs']
| make-series avg(req_duration_ms) default=0 on _time from ago(1h) to now() step 5m
```

[Run in Playground](https://play.axiom.co/axiom-play-qf1k/query?initForm=%7B%22apl%22%3A%22%5B'sample-http-logs'%5D%20%7C%20make-series%20avg(req_duration_ms)%20default%3D0%20on%20_time%20from%20ago(1h)%20to%20now()%20step%205m%22%7D)

**Output**

| avg_req_duration_ms       |
| ---------------------------- |
| [123, 98, 110, 105, 130...] |

The query produces a time series of average request durations across the last hour, grouped into 5-minute intervals.

</Tab>
<Tab title="OpenTelemetry traces">

You want to monitor average span duration per service, binned into 10-minute intervals.

**Query**

```kusto
['otel-demo-traces']
| make-series avg(duration) default=0 on _time from ago(2h) to now() step 10m by ['service.name']
```

[Run in Playground](https://play.axiom.co/axiom-play-qf1k/query?initForm=%7B%22apl%22%3A%22%5B'otel-demo-traces'%5D%20%7C%20make-series%20avg(duration)%20default%3D0%20on%20_time%20from%20ago(2h)%20to%20now()%20step%2010m%20by%20%5B'service.name'%5D%22%7D)

**Output**

| service.name    | avg_duration                  |
| --------------- | ------------------------------ |
| frontend        | [20ms, 18ms, 22ms, 19ms, ...] |
| checkout        | [35ms, 40ms, 33ms, 37ms, ...] |

The query builds parallel time series for each service, showing average span duration trends.

</Tab>
<Tab title="Security logs">

You want to analyze the rate of HTTP 500 errors in your logs per minute.

**Query**

```kusto
['sample-http-logs']
| where status == '500'
| make-series count() default=0 on _time from ago(30m) to now() step 1m
```

[Run in Playground](https://play.axiom.co/axiom-play-qf1k/query?initForm=%7B%22apl%22%3A%22%5B'sample-http-logs'%5D%20%7C%20where%20status%20%3D%3D%20'500'%20%7C%20make-series%20count()%20default%3D0%20on%20_time%20from%20ago(30m)%20to%20now()%20step%201m%22%7D)

**Output**

| count_status_401       |
| ------------------------ |
| [0, 1, 0, 2, 1, 0, ...] |

The query generates a time series of HTTP 500 error counts, grouped into 1-minute bins.

</Tab>
</Tabs>

## List of related operators

- [extend](/apl/tabular-operators/extend-operator): Creates new calculated fields, often as preparation before `make-series`. Use `extend` when you want to preprocess data for time series analysis.
- [mv-expand](/apl/tabular-operators/mv-expand): Expands arrays into multiple rows. Use `mv-expand` to work with the arrays returned by `make-series`.
- [summarize](/apl/tabular-operators/summarize-operator): Aggregates rows into groups but does not generate continuous time bins. Use `summarize` when you want flexible grouping without forcing evenly spaced intervals.
- [top](/apl/tabular-operators/top-operator): Returns the top rows by a specified expression, not time series. Use `top` when you want to focus on the most significant values instead of trends over time.
