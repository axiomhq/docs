---
title: array_shift_right
description: 'This page explains how to use the array_shift_right function in APL.'
---

The `array_shift_right` function in Axiom Processing Language (APL) shifts the elements of an array one position to the right. The last element of the array wraps around and becomes the first element. You can use this function to reorder elements, manage time-series data in circular arrays, or preprocess arrays for specific analytical needs.

### When to use the function
- To manage and rotate data within arrays.
- To implement cyclic operations or transformations.
- To manipulate array data structures in log analysis or telemetry contexts.

## For users of other query languages

If you come from other query languages, this section explains how to adjust your existing queries to achieve the same results in APL.

<AccordionGroup>
<Accordion title="Splunk SPL users">

In Splunk SPL, similar functionality might be achieved using custom code to rotate array elements, as there is no direct equivalent to `array_shift_right`. APL provides this functionality natively, making it easier to work with arrays directly.

<CodeGroup>
```sql Splunk example
| eval shifted_array=mvappend(mvindex(array,-1),mvindex(array,0,len(array)-1))
```

```kusto APL equivalent
['dataset.name']
| extend shifted_array = array_shift_right(array)
```
</CodeGroup>

</Accordion>
<Accordion title="ANSI SQL users">

ANSI SQL does not have a built-in function for shifting arrays. In SQL, achieving this would involve user-defined functions or complex subqueries. In APL, `array_shift_right` simplifies this operation significantly.

<CodeGroup>
```sql SQL example
WITH shifted AS (
  SELECT
    array_column[ARRAY_LENGTH(array_column)] AS first_element,
    array_column[1:ARRAY_LENGTH(array_column)-1] AS rest_of_elements
  FROM table
)
SELECT ARRAY_APPEND(first_element, rest_of_elements) AS shifted_array
FROM shifted
```

```kusto APL equivalent
['dataset.name']
| extend shifted_array = array_shift_right(array)
```
</CodeGroup>

</Accordion>
</AccordionGroup>

## Usage

### Syntax

```kusto
array_shift_right(array: array) : array
```

### Parameters

| Parameter | Type   | Description                                |
|-----------|--------|--------------------------------------------|
| `array`   | array  | The input array whose elements are shifted |

### Returns

An array with its elements shifted one position to the right. The last element of the input array wraps around to the first position.

## Use case examples

### Log analysis

Shift elements in an array of event codes to align and analyze patterns.

**Query**

```kusto
['otel-demo-traces']
| extend shifted_events = array_shift_right(events)
```

[Run in Playground](https://play.axiom.co/axiom-play-qf1k/explorer?initForm=%7B%22apl%22%3A%22%5B%27otel-demo-traces%27%5D%20%7C%20extend%20shifted_events%20%3D%20array_shift_right%28events%29%22%7D)

**Output**

| events          | shifted_events |
|-----------------|----------------|
| [A, B, C]       | [C, A, B]      |
| [X, Y, Z]       | [Z, X, Y]      |

The query rotates the event codes to analyze sequences starting with the previous event.

### OpenTelemetry traces

Reorganize span events in telemetry data for visualization or debugging.

**Query**

```kusto
['otel-demo-traces']
| extend shifted_events = array_shift_right(events)
| project trace_id, shifted_events
```

[Run in Playground](https://play.axiom.co/axiom-play-qf1k/explorer?initForm=%7B%22apl%22%3A%22%5B%27otel-demo-traces%27%5D%20%7C%20extend%20shifted_events%20%3D%20array_shift_right%28events%29%20%7C%20project%20trace_id%2C%20shifted_events%22%7D)

**Output**

| trace_id      | shifted_events |
|---------------|----------------|
| trace1        | [C, A, B]      |
| trace2        | [Z, X, Y]      |

The query rotates span events for better trace debugging.

### Security logs

Analyze IP sequences in security logs by rotating array data for context-aware correlation.

**Query**

```kusto
['otel-demo-traces']
| extend rotated_ips = array_shift_right(events)
| project _time, rotated_ips
```

[Run in Playground](https://play.axiom.co/axiom-play-qf1k/explorer?initForm=%7B%22apl%22%3A%22%5B%27otel-demo-traces%27%5D%20%7C%20extend%20rotated_ips%20%3D%20array_shift_right%28events%29%20%7C%20project%20_time%2C%20rotated_ips%22%7D)

**Output**

| _time                | rotated_ips  |
|----------------------|--------------|
| 2024-12-12T08:00:00 | [5, 1, 2, 3] |
| 2024-12-12T09:00:00 | [4, 5, 6, 1] |

This example demonstrates shifting IP addresses for sequence analysis in logs.

## List of related functions

- [**array_shift_left**](/apl/array-functions/array_shift_left-function): Shifts array elements one position to the left, moving the first element to the last position.
- [**array_length**](/apl/array-functions/array_length-function): Returns the number of elements in an array.
- [**array_concat**](/apl/array-functions/array_concat-function): Concatenates multiple arrays into a single array.
- [**array_index_of**](/apl/array-functions/array_index_of-function): Finds the index of a specified value in an array.
- [**mvexpand**](/apl/array-functions/mvexpand-function): Expands each element of an array into a separate row.