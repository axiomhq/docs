---
title: has_ipv4
description: 'This page explains how to use the has_ipv4 function in APL.'
---

The `has_ipv4` function in APL determines if a given string is a valid IPv4 address. You can use this function to validate and filter fields that contain IP address data, especially when working with logs, network traffic analysis, or security monitoring. It is particularly useful when parsing large datasets to ensure only well-formed IPv4 addresses are considered.

## For users of other query languages

If you come from other query languages, this section explains how to adjust your existing queries to achieve the same results in APL.

<AccordionGroup>
<Accordion title="Splunk SPL users">

In Splunk SPL, validating IPv4 addresses typically involves using regular expressions. The `has_ipv4` function in APL simplifies this process with a dedicated, optimized function.

<CodeGroup>
```sql Splunk example
| eval is_valid_ipv4=if(match(ip_field, "^\d{1,3}(\.\d{1,3}){3}$"), 1, 0)
```

```kusto APL equivalent
['sample-http-logs']
| where has_ipv4(uri)
```
</CodeGroup>

</Accordion>
<Accordion title="ANSI SQL users">

In ANSI SQL, validating IPv4 addresses often requires complex CASE statements or pattern matching using the `LIKE` operator. APLâ€™s `has_ipv4` function streamlines this by providing a straightforward, built-in function.

<CodeGroup>
```sql SQL example
SELECT * FROM logs WHERE uri LIKE '%.%.%.%'
```

```kusto APL equivalent
['sample-http-logs']
| where has_ipv4(uri)
```
</CodeGroup>

</Accordion>
</AccordionGroup>

## Usage

### Syntax

```kusto
has_ipv4(expression)
```

### Parameters

| Parameter   | Description                                             | Type    |
|-------------|---------------------------------------------------------|---------|
| `expression` | The string expression to check for a valid IPv4 address. | string  |

### Returns

The function returns a boolean value: `true` if the `expression` contains a valid IPv4 address, and `false` otherwise.

## Use case example

When analyzing HTTP logs, you can use `has_ipv4` to filter requests originating from valid IPv4 addresses.

**Query**

```kusto
['sample-http-logs']
| extend has_ipv4(uri)
```

[Run in Playground](https://play.axiom.co/axiom-play-qf1k/explorer?initForm=%7B%22apl%22%3A%22%5B%27sample-http-logs%27%5D%20%7C%20where%20has_ipv4(uri)%20%7C%20project%20_time%2C%20uri%2C%20method%2C%20status%22%7D)

**Output**

| _time               | uri              | method | status |
|---------------------|------------------|--------|--------|
| 2024-11-14T10:15:00Z | 192.168.1.1/api | GET    | 200    |
| 2024-11-14T10:17:00Z | 10.0.0.2/login  | POST   | 403    |

This query filters requests from logs to include only entries with valid IPv4 addresses.

## List of related functions

- [**has_ipv4**](/apl/string-functions/has_ipv6-function): Use this function to validate IP addresses.
- [**parse_ipv4**](/apl/string-functions/parse_ipv4-function): Parse and retrieve components of an IP address.