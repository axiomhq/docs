---
title: format_apl
description: 'This page explains how to use the format_apl function in APL.'
---

Use the `format_apl` function in APL to convert a parsed APL query structure (stored as a dynamic object) back into its string representation. This is the inverse operation of `parse_apl`, allowing you to reconstruct APL query text from its parsed form.

You use `format_apl` when you need to programmatically build or modify APL queries, inspect query structure, or transform parsed query representations back into executable query strings. This is particularly useful for query generation, query templating systems, and programmatic query manipulation in automation workflows.

## Usage

### Syntax

```kusto
format_apl(apl_dict)
```

### Parameters

| Name | Type | Description |
| ---- | ---- | ----------- |
| `apl_dict` | `dynamic` | A dynamic object representing the parsed structure of an APL query, typically generated by the `parse_apl` function. |

### Returns

A string containing the APL query reconstructed from the parsed structure. The returned query string is syntactically valid and can be executed.

## Use case examples

<Tabs>
<Tab title="Log analysis">

Use `format_apl` to generate dynamic queries based on stored query templates for log analysis automation.

**Query**

```kusto
['sample-http-logs']
| extend base_query = parse_apl('["sample-http-logs"] | summarize count() by status')
| extend query_text = format_apl(base_query)
| project query_text
| take 1
```

**Output**

| query_text                                               |
| -------------------------------------------------------- |
| ['sample-http-logs'] \| summarize count() by status      |

This query demonstrates how to parse and reformat APL queries, useful for query templating and generation systems.

</Tab>
<Tab title="OpenTelemetry traces">

Use `format_apl` to build trace analysis queries programmatically from stored query patterns.

**Query**

```kusto
['otel-demo-traces']
| extend trace_query_parsed = parse_apl('["otel-demo-traces"] | where kind == "server"')
| extend trace_query_string = format_apl(trace_query_parsed)
| project trace_query_string
| take 1
```

**Output**

| trace_query_string                                      |
| ------------------------------------------------------- |
| ['otel-demo-traces'] \| where kind == 'server'          |

This query shows how to work with trace query structures programmatically, enabling dynamic trace analysis pipelines.

</Tab>
<Tab title="Security logs">

Use `format_apl` to generate security queries from templates for automated threat detection workflows.

**Query**

```kusto
['sample-http-logs']
| extend security_query = parse_apl('["sample-http-logs"] | where status == "401" or status == "403"')
| extend formatted_security_query = format_apl(security_query)
| project formatted_security_query
| take 1
```

**Output**

| formatted_security_query                                                 |
| ------------------------------------------------------------------------ |
| ['sample-http-logs'] \| where status == '401' or status == '403'         |

This query demonstrates generating security queries programmatically, useful for building adaptive security monitoring systems.

</Tab>
</Tabs>

## List of related functions

- [parse_apl](/apl/scalar-functions/sql-functions/parse-apl): Use `parse_apl` to convert APL query strings into structured dynamic objects. Use `format_apl` to convert those objects back into query strings.
- [format_sql](/apl/scalar-functions/sql-functions#format-sql): Use `format_sql` to format SQL queries from parsed structures. Use `format_apl` for APL query formatting.
- [parse_json](/apl/scalar-functions/string-functions#parse-json): Use `parse_json` to parse JSON strings. Use `parse_apl` and `format_apl` specifically for APL query structures.
- [dynamic_to_json](/apl/scalar-functions/conversion-functions#dynamic-to-json): Use `dynamic_to_json` to convert dynamic objects to JSON strings. Use `format_apl` to convert parsed query structures back to APL syntax.

