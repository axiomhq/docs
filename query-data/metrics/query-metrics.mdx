---
title: Query metrics
description: This page explains how to query OpenTelemetry metrics.
---

Query and analyze your OpenTelemetry metrics data using the Axiom Console. This page shows you how to extract insights from your metrics through filtering, aggregation, and transformation operations.

For more information on working with metrics at Axiom, see [Metrics overview](/query-data/metrics/overview).

<Info>
Support for OTel metrics is currently in public preview. For more information, see [Feature states](/platform-overview/roadmap#feature-states).
</Info>

## Concepts

- **Dataset:** A group of related metrics.
- **Metric:** A measurement that tracks a specific aspect of your system over time.
- **Tag:** A key-value pair identifying a series.
- **Series:** A unique combination of a metric and tag set.

## Build metrics query

To build a typical metrics query:

1. Click the Query tab.
1. Click **Builder** in the top left.
1. In **Dataset**, define the source of your query. Select an OTel metrics dataset, and then select the metric you want to query.
1. In **Where**, filter the results. Restrict the query to a set of series whose tag values match the conditions you specify.
1. In **Transformations**, select the transformations you want to apply to the data.
1. Click **Run**.

<Note>
The metric selector only shows metrics that were active during the selected time range. Expand the time range to see more metrics in the dropdown.

Axiom doesn’t support PromQL (Prometheus Query Language) queries. Translate PromQL queries to APL using the aggregation functions and operators explained on this page. For example, use functions like `prom::rate` for PromQL-style rate calculations.
</Note>

## Example query

<Frame>
<img src="/doc-assets/shots/example-metrics-query.png" alt="Example metrics query" />
</Frame>

This example queries the `axiom-dev.metrics` dataset’s `alertmanager_alerts` metric one hour before the current time. It filters results to events where `k8s.namespace.name` is `monitoring` and aggregates events over 30-second time windows into their average value.

## Elements of queries

The following explains each element of a metrics query.

### Source

Specify the dataset and the metric in the **Dataset** field. The dataset and metric names are separated by a colon in the Builder interface.

For example, `axiom-dev.metrics:alertmanager_alerts`.

### Filter

Use the **Where** section to filter series based on tag values.
1. Click **+** in the **Where** section.
1. Select the tag where you want to filter for values.
1. Select the logical operator of the filter. Available operators are:
    - Equality: `==`, `!=`
    - Comparisons: `<`, `<=`, `>`, `>=`
1. Specify the value for which you want to filter.
1. Click **+** to add another filter and join them with the logical and operator.

For example, the following joins three filters: `project == /.*metrics.*/ and code >= 200 and code < 300`.

### Transformations

Use the **Transformations** section to transform individual values or series.

1. Click **+** in the **Transformations** section.
1. Select the transformation you want to apply to the data. Available transformations are:
    - **map:** Map the data to a new value using the expression you specify.
    - **align:** Aggregate data using the function and the time window you specify.
    - **group:** Group the data by a set of tags using the aggregation function you specify.
    - **bucket** Aggregate the data by time and tag dimensions simultaneously.

#### Map

Use `map` to transform individual values.

Available mapping functions:

| Function              | Description                                                      |
|-----------------------|------------------------------------------------------------------|
| `rate`                | Computes the per-second rate of change for a metric.             |
| `abs`                 | Returns the absolute value of each data point.                   |
| `interpolate::linear` |  Linear interpolation of missing values. |
| `fill::prev`          | Fills missing values using the previous non-null value.          |

For example, to calculate rate per second for the metric, use `map rate`. To fill empty values with the latest value, use `map fill::prev`.

#### Align

Use `align` to aggregate over time windows. You can specify the time window and the aggregation function to apply.

Available aggregation functions:

| Function | Description                           |
|----------|---------------------------------------|
| `avg`    | Averages values in each interval.     |
| `count`  | Counts non-null values per interval.  |
| `max`    | Takes the maximum value per interval. |
| `min`    | Takes the minimum value per interval. |
| `prom::rate` | PromQL-style rate calculation. |
| `sum`    | Sums values in each interval.         |
| `last`   | Takes the last value in each interval.|

For example, to calculate the average over 5-minute time windows, use `align to 5m using avg`. To count the data points in the last hour, use `align to 1h using count`.

When metrics emit data at regular intervals but with different offsets across time series, `align` maps your data to a fixed set of time intervals. This makes it easier to visualize data from different sources on a single chart. If the alignment interval is shorter than the emission interval, some intervals can have null values. Select how to handle null values in the [chart options](/query-data/explore#configure-chart-options).

#### Group

Use `group` to combine series by tags. You can specify the tags to group by and the aggregation function to apply. If you don’t specify tags, Axiom aggregates all series into one group.

Available aggregation functions:

| Function | Description                           |
|----------|---------------------------------------|
| `avg`    | Averages values in each group.     |
| `count`  | Counts non-null values per group.  |
| `max`    | Takes the maximum value per group. |
| `min`    | Takes the minimum value per group. |
| `sum`    | Sums values in each group.         |

For example:
- To calculate the number of series, use `group using count`.
- To sum the values of all series, use `group using sum`.
- To group data by the `project` and `namespace` tags using the `sum` aggregation, use `group by project, namespace using sum`.

#### Bucket

Use `bucket` to aggregate over time and tag dimensions simultaneously. You can apply multiple aggregations when using `bucket` to show the results of multiple aggregations in a single chart. If you don’t specify tags when using `bucket`, the chosen aggregations will be applied across all tags.

When the underlying metric is a histogram, `bucket` aggregations are computed using the `interpolate_histogram` function. For quantile aggregations, this will estimate the quantile using the underlying histogram data.

Available aggregation functions:

| Function | Description                           |
|----------|---------------------------------------|
| `avg`    | Averages values in each group.     |
| `count`  | Counts non-null values per group.  |
| `max`    | Takes the maximum value per group. |
| `min`    | Takes the minimum value per group. |
| `sum`    | Sums values in each group.         |
| `quantile`    | Compute the specified quantile. Any value between 0 and 1 can be chosen. For example, P99 corresponds to the 0.99 quantile.         |
