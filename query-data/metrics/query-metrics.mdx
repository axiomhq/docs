---
title: Query metrics
description: This page explains how to query OpenTelemetry metrics.
---

Query and analyze your OpenTelemetry metrics data using the Axiom Console. This page shows you how to extract insights from your metrics through filtering, aggregation, and transformation operations.

For more information on working with metrics at Axiom, see [Metrics overview](/query-data/metrics/overview).

<Info>
Support for OTel metrics is currently in private preview. For more information, see [Feature states](/platform-overview/roadmap#feature-states).
</Info>

## Concepts

- **Dataset:** A group of related metrics.
- **Metric:** A measurement that tracks a specific aspect of your system over time.
- **Tag:** A key-value pair identifying a series.
- **Series:** A unique combination of a metric and tag set.

## Query structure

A typical metrics query contains the following:

1. **Source**: Define the dataset and the metric to query.
1. **Filter**: Restrict the query to a set of series whose tag values match the conditions you specify.
1. **Transformation:** Apply one or more transformations to the raw data. Available transformations are:
    - **Mapping:** Map the data to a new value using the expression you specify.
    - **Align:** Aggregate data using the function and the time window you specify.
    - **Grouping:** Group the data by a set of tags using the aggregation function you specify.

## Build metrics query

1. Click the Query tab.
1. Click **Builder** in the top left.
1. In **Dataset**, select an OTel metrics dataset, and then select the metric you want to query.
1. To filter data:
    1. Click **+** in the **Where** section.
    1. Select the tag where you want to filter for values.
    1. Select the logical operator of the filter.
    1. Specify the value for which you want to filter.
1. In **Transformations**, select the transformations you want to apply to the data.
1. Click **Run**.

## Example query

<Frame>
<img src="/doc-assets/shots/example-metrics-query.png" alt="Example metrics query" />
</Frame>

This example queries the `axiom-dev.metrics` dataset’s `alertmanager_alerts` metric one hour before the current time. It filters results to events where `k8s.namespace.name` is `monitoring` and aggregates events over 30-second time windows into their average value.

## Elements of queries

The following explains each element of a metrics query.

### Source

Specify the dataset and the metric.

**Syntax:**

```kusto
<dataset>:<metric>
```

- **dataset**: Name of the dataset.
- **metric**: Name of the metric.

### Filter

Use `where` to filter series based on tag values.

**Syntax:**

```kusto
| where <tag> <operator> <value>
```

Available operators:

- Equality: `==`, `!=`
- Comparisons: `<`, `<=`, `>`, `>=`

**Example:**

```kusto
| where project == /.*metrics.*/ and code >= 200 and code < 300
```

### Mapping

Transform individual values or series.

Available functions:

| Function              | Description                                                      |
|-----------------------|------------------------------------------------------------------|
| `rate`                | Computes the per-second rate of change for a metric.             |
| `abs`                 | Returns the absolute value of each data point.                   |
| `interpolate::linear` |  Linear interpolation of missing values. |
| `fill::prev`          | Fills missing values using the previous non-null value.          |
| `!`                   | Negates the value. |

**Examples for data mappings:**

```kusto
// Calculate rate per second for the metric
| map rate

// Fill empty values with the latest value
| map fill::prev
```

### Aggregation

Use `align` to aggregate over time windows.

**Syntax:**

```kusto
| align to <time_window> using <aggregation_function>
```

Available aggregation functions:

| Function | Description                           |
|----------|---------------------------------------|
| `avg`    | Averages values in each interval.     |
| `count`  | Counts non-null values per interval.  |
| `max`    | Takes the maximum value per interval. |
| `min`    | Takes the minimum value per interval. |
| `prom::rate` | Prometheus style rate |
| `sum`    | Sums values in each interval.         |

**Examples:**

```kusto
// Calculate the average over 5-minute time windows
| align to 5m using avg

// Count the data points in the last hour
| align to 1h using count
```

### Grouping

Use `group by` to combine series by tags.

**Syntax:**

```kusto
| group [by <tag1>, <tag2>] using <aggregation_function>
```

If you don’t specify tags, Axiom aggregates all series into one group.

Available aggregation functions:

| Function | Description                           |
|----------|---------------------------------------|
| `avg`    | Averages values in each group.     |
| `count`  | Counts non-null values per group.  |
| `max`    | Takes the maximum value per group. |
| `min`    | Takes the minimum value per group. |
| `sum`    | Sums values in each group.         |

**Examples:**

```kusto
// Calculate the number of series
| group using count

// Calculate the total number of nodes
| group using sum

// Group data by the `project` and `namespace` tags using the `sum` aggregation
| group by project, namespace using sum
```
